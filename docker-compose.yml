version: "3.5"
services:

    neth_1:
        image: nethermind/nethermind:1.14.5
        command: --config goerli --JsonRpc.Enabled true --JsonRpc.EngineHost=10.5.0.2 --JsonRpc.EnginePort 8546 --JsonRpc.JwtSecretFile=secret/jwt.hex --Pruning.Mode None
        volumes:
            - ./neth_1/db/goerli:/nethermind/nethermind_db/condrieu
            - ./neth_1/keystore:/nethermind/keystore
            - ./neth_1/secret/jwt.hex:/nethermind/secret/jwt.hex
        ports:
            - 0.0.0.0:8547:8545
            - 0.0.0.0:3001:3000
        networks:
            vpcbr:
                ipv4_address: 10.5.0.2

    prysm_1:
        image: gcr.io/prysmaticlabs/prysm/beacon-chain:stable
        command: --accept-terms-of-use --prater --datadir=/data --jwt-secret=/secret/jwt.hex --execution-endpoint=http://10.5.0.2:8546 --checkpoint-sync-url=https://goerli.checkpoint-sync.ethdevops.io --genesis-beacon-api-url=https://goerli.checkpoint-sync.ethdevops.io
        volumes:
            - ./prysm_1/.eth2:/data
            - ./prysm_1/secret:/secret
        ports:
            - 0.0.0.0:4001:4000
            - 0.0.0.0:13001:13000
            - 0.0.0.0:12001:12000
        networks:
            vpcbr:
                ipv4_address: 10.5.0.3
    neth_2:
        image: nethermind
        command: --config goerli --JsonRpc.Enabled true --JsonRpc.EngineHost=10.5.0.4 --JsonRpc.EnginePort 8546 --JsonRpc.JwtSecretFile=secret/jwt.hex --Pruning.Mode None
        volumes:
            - ./neth_2/db/goerli:/nethermind/nethermind_db/condrieu
            - ./neth_2/keystore:/nethermind/keystore
            - ./neth_2/secret/jwt.hex:/nethermind/secret/jwt.hex
        ports:
            - 0.0.0.0:8548:8545
            - 0.0.0.0:3002:3000
        networks:
            vpcbr:
                ipv4_address: 10.5.0.4

    prysm_2:
        image: gcr.io/prysmaticlabs/prysm/beacon-chain:stable
        command: --accept-terms-of-use --prater --datadir=/data --jwt-secret=/secret/jwt.hex --execution-endpoint=http://10.5.0.4:8546 --checkpoint-sync-url=https://goerli.checkpoint-sync.ethdevops.io --genesis-beacon-api-url=https://goerli.checkpoint-sync.ethdevops.io
        volumes:
            - ./config/condrieu.json:/config/genesis/condrieu.json
            - ./node_2/configs/Condrieu.cfg:/nethermind/configs/Condrieu.cfg
            - ./config/static-nodes.json:/nethermind/Data/static-nodes.json
            - ./node_2/db/condrieu:/nethermind/nethermind_db/condrieu
            - ./node_2/keystore:/nethermind/keystore
        ports:
            - 0.0.0.0:4002:4000
            - 0.0.0.0:13002:13000
            - 0.0.0.0:12002:12000
        networks:
            vpcbr:
                ipv4_address: 10.5.0.5

networks:
    vpcbr:
        driver: bridge
        ipam:
            config:
                - subnet: 10.5.0.0/16
